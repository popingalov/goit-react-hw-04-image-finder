(this["webpackJsonpgoit-react-hw-04-image-finder"]=this["webpackJsonpgoit-react-hw-04-image-finder"]||[]).push([[0],[,,,function(e,t,r){e.exports={loader:"Spiner_loader__1KcXc",inner:"Spiner_inner__38C3g",one:"Spiner_one__2sEkW","rotate-one":"Spiner_rotate-one__3YeUn",two:"Spiner_two__23vQc","rotate-two":"Spiner_rotate-two__2sjJs",three:"Spiner_three__3OTLa","rotate-three":"Spiner_rotate-three__-vYOS"}},,function(e,t,r){e.exports={SearchForm:"SearchForm_SearchForm__2WvRV",SearchForm_button:"SearchForm_SearchForm_button__1UmDN",SearchForm_button_label:"SearchForm_SearchForm_button_label__H64wW",SearchForm_input:"SearchForm_SearchForm_input__3AzDk","SearchForm-input":"SearchForm_SearchForm-input__vR_7z"}},,,,,function(e,t,r){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__2X6hI",ImageGalleryItem_image:"ImageGalleryItem_ImageGalleryItem_image__31SzI"}},function(e,t,r){e.exports={Overlay:"Modal_Overlay__1xYBC",Modal:"Modal_Modal__vbF9R"}},,,,,function(e,t,r){e.exports={Searchbar:"SearchBar_Searchbar__3pzxN"}},function(e,t,r){e.exports={ImageGallery:"ImageGallery_ImageGallery__3-pfy"}},function(e,t,r){e.exports={Button:"Button_Button__2hWTW"}},,,,,,,,,,function(e,t,r){},function(e,t,r){"use strict";r.r(t);var a=r(6),n=r.n(a),c=r(13),o=r(2),i=r(1),s=r.n(i),u=r(14),l=r(15),j=r(21),m=r(20),b=r(16),_=r.n(b),d=r(5),h=r.n(d),f=r(0);function O(e){var t=e.saveSubmit,r=Object(i.useState)(""),a=Object(o.a)(r,2),n=a[0],c=a[1];return Object(f.jsxs)("form",{className:h.a.SearchForm,onSubmit:function(e){if(e.preventDefault(),""===n.trim())return alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442"),void c("");t(n.toLowerCase()),c("")},children:[Object(f.jsx)("button",{type:"submit",className:h.a.SearchForm_button,children:Object(f.jsx)("span",{className:h.a.SearchForm_button_label,children:"Search"})}),Object(f.jsx)("input",{className:h.a.SearchForm_input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:n,onChange:function(e){return c(e.target.value)}})]})}var p=function(e){Object(j.a)(r,e);var t=Object(m.a)(r);function r(){return Object(u.a)(this,r),t.apply(this,arguments)}return Object(l.a)(r,[{key:"render",value:function(){var e=this.props.saveSubmit;return Object(f.jsx)("header",{className:_.a.Searchbar,children:Object(f.jsx)(O,{saveSubmit:e})})}}]),r}(i.Component),g=r(17),v=r.n(g),S=r(10),x=r.n(S);function I(e){var t=e.formRes,r=e.returnUrl;return Object(f.jsxs)(f.Fragment,{children:[!t&&Object(f.jsx)("h1",{children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u043d\u044b\u0445 \u0444\u043e\u0442\u043e \u0435\u0449\u0451 \u043d\u0435\u0442"}),t&&t.map((function(e,a){return Object(f.jsxs)("li",{className:x.a.ImageGalleryItem,children:[Object(f.jsx)("img",{onClick:function(){r(e)},src:e.webformatURL,alt:"tags",className:x.a.ImageGalleryItem_image}),a===t.length-12&&Object(f.jsx)("div",{id:"scroll"})]},e.id)}))]})}function y(e){var t=e.returnUrl,r=e.arrayImage,a=e.style;return Object(f.jsx)(f.Fragment,{children:Object(f.jsx)("ul",{className:v.a.ImageGallery,style:a,children:Object(f.jsx)(I,{formRes:r,returnUrl:t})})})}var w=r(11),F=r.n(w),N=r(9),E=document.querySelector("#modal-root");function R(e){var t=this,r=e.toggle,n=e.url;Object(N.useEffect)((function(){var e=function(e){return"Escape"===e.code&&r()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[r]);return Object(a.createPortal)(Object(f.jsx)("div",{className:F.a.Overlay,onClick:function(e){e.currentTarget===e.target&&t.props.toggle()},children:Object(f.jsx)("div",{className:F.a.Modal,children:Object(f.jsx)("img",{src:n,alt:""})})}),E)}var G=r(18),U=r.n(G);function T(e){var t=e.morePage,r=e.total;return Object(f.jsxs)("button",{className:U.a.Button,onClick:t,children:["\u041d\u0430\u0439\u0434\u0435\u043d\u043e:",r,"foto ",Object(f.jsx)("br",{}),"Load More"]})}var k=r.p+"static/media/wooden-train-2066492_1920.c7803c8b.jpg";function L(){return Object(f.jsx)("div",{children:Object(f.jsx)("img",{width:"100%",src:k,alt:""})})}var M=r(3),A=r.n(M);function B(){return Object(f.jsxs)("div",{className:A.a.loader,children:[Object(f.jsx)("div",{className:"".concat(A.a.inner," ").concat(A.a.one)}),Object(f.jsx)("div",{className:"".concat(A.a.inner," ").concat(A.a.two)}),Object(f.jsx)("div",{className:"".concat(A.a.inner," ").concat(A.a.three)})]})}function C(e){var t=e.error;return Object(f.jsx)("h1",{children:t})}var P=r(12),Y=r.n(P),z=r(19),W={BASE_URL:"https://pixabay.com/api",IMAGE_TYPE:"photo",ORIENTATION:"horizontal",QUANTITY_PER_PAGE:12,KEY:"24908309-0f9f1bd491628a6ee7000b789"};function q(){return(q=Object(z.a)(Y.a.mark((function e(t,r){var a,n,c,o;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(W.BASE_URL,"/?image_type=").concat(W.IMAGE_TYPE,"&orientation=").concat(W.ORIENTATION,"&q=").concat(t,"&page=").concat(r,"&per_page=").concat(W.QUANTITY_PER_PAGE,"&key=").concat(W.KEY),e.next=3,fetch(a);case 3:return n=e.sent,e.next=6,n.json();case 6:return c=e.sent,o=c.hits.reduce((function(e,t){return e.push({id:t.id,webformatURL:t.webformatURL,largeImageURL:t.largeImageURL}),e}),[]),c.total>12&&o.length>0&&(o[0].loadMore=c.total),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D=function(){var e,t=Object(i.useState)(""),r=Object(o.a)(t,2),a=r[0],n=r[1],s=Object(i.useState)(!1),u=Object(o.a)(s,2),l=u[0],j=u[1],m=Object(i.useState)(null),b=Object(o.a)(m,2),_=b[0],d=b[1],h=Object(i.useState)(1),O=Object(o.a)(h,2),g=O[0],v=O[1],S=Object(i.useState)("idle"),x=Object(o.a)(S,2),I=x[0],w=x[1],F=Object(i.useState)([]),N=Object(o.a)(F,2),E=N[0],G=N[1],U=Object(i.useState)(""),k=Object(o.a)(U,2),M=k[0],A=k[1];Object(i.useEffect)((function(){1===g?""!==a&&(w("pending"),G([]),P(a,1).then((function(e){if(e.length>0)return G(e),void w("resolved");A("\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 ".concat(a," \u043d\u0435\u0431\u044b\u043b\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439, \u043a\u0440\u0443\u0442\u0438\u0442\u0435 \u0431\u0430\u0440\u0430\u0431\u0430\u043d")),w("rejected"),setTimeout((function(){w("idle")}),2e3)})).catch((function(e){return function(){A("\u0427\u0451\u0442 \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a: ".concat(e.message)),w("rejected"),setTimeout((function(){w("idle")}),2e3)}}))):P(a,g).then((function(e){G((function(t){return[].concat(Object(c.a)(t),Object(c.a)(e))})),w("resolved"),document.getElementById("scroll").scrollIntoView({block:"center",behavior:"smooth"})}))}),[a,g]);var P=function(e,t){return function(e,t){return q.apply(this,arguments)}(e,t)},Y=function(){j(!l)};return Object(f.jsxs)("div",{children:[Object(f.jsx)(p,{saveSubmit:function(e){n(e),v(1)}}),Object(f.jsx)(y,{returnUrl:function(e){d(e),Y()},arrayImage:E,resetStatus:function(){w("idle")}}),l&&Object(f.jsx)(R,{url:_.largeImageURL,toggle:Y}),(null===(e=E[0])||void 0===e?void 0:e.loadMore)>12&&Object(f.jsx)(T,{morePage:function(){w("pending"),v((function(e){return e+1}))},total:E[0].loadMore}),"idle"===I&&Object(f.jsx)(L,{}),"pending"===I&&Object(f.jsx)(B,{}),"rejected"===I&&Object(f.jsx)(C,{error:M})]})},J=(r(27),r(28),document.querySelector("#root"));n.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(D,{})}),J)}],[[29,1,2]]]);
//# sourceMappingURL=main.e830a62f.chunk.js.map