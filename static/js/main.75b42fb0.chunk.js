(this["webpackJsonpgoit-react-hw-04-image-finder"]=this["webpackJsonpgoit-react-hw-04-image-finder"]||[]).push([[0],[,,,,,,function(t,e,a){t.exports={loader:"Spiner_loader__2icL7",inner:"Spiner_inner__2l-wu",one:"Spiner_one__1hzwC","rotate-one":"Spiner_rotate-one__1GZ-R",two:"Spiner_two__3tO9K","rotate-two":"Spiner_rotate-two__SxV7u",three:"Spiner_three__2fgde","rotate-three":"Spiner_rotate-three__mFsls"}},function(t,e,a){t.exports={SearchForm:"SearchForm_SearchForm__2WvRV",SearchForm_button:"SearchForm_SearchForm_button__1UmDN",SearchForm_button_label:"SearchForm_SearchForm_button_label__H64wW",SearchForm_input:"SearchForm_SearchForm_input__3AzDk","SearchForm-input":"SearchForm_SearchForm-input__vR_7z"}},,function(t,e,a){t.exports={ImageGalleryItem:"FotoHistory_ImageGalleryItem__2L5sx",ImageGalleryItem_image:"FotoHistory_ImageGalleryItem_image__qBRG0",ImageGallery:"FotoHistory_ImageGallery__IDppw"}},,,,function(t,e,a){t.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__2X6hI",ImageGalleryItem_image:"ImageGalleryItem_ImageGalleryItem_image__31SzI"}},function(t,e,a){t.exports={Overlay:"Modal_Overlay__1xYBC",Modal:"Modal_Modal__vbF9R"}},,function(t,e,a){t.exports={Searchbar:"SearchBar_Searchbar__3pzxN"}},function(t,e,a){t.exports={ImageGallery:"ImageGallery_ImageGallery__3-pfy"}},function(t,e,a){t.exports={Button:"Button_Button__2hWTW"}},,,,,,,,function(t,e,a){},function(t,e,a){"use strict";a.r(e);var r=a(8),o=a.n(r),n=a(10),c=a(2),s=a(3),l=a(5),i=a(4),u=a(1),m=a.n(u),h=a(16),d=a.n(h),j=a(7),g=a.n(j),p=a(0),b=function(t){Object(l.a)(a,t);var e=Object(i.a)(a);function a(){var t;Object(c.a)(this,a);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))).state={searchForm:""},t.SaveValue=function(e){t.setState({searchForm:e.target.value})},t.Submit=function(e){if(e.preventDefault(),""===t.state.searchForm.trim())return alert("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442"),void t.setState({searchForm:""});t.props.saveSubmit(t.state.searchForm.toLowerCase()),t.setState({searchForm:""})},t}return Object(s.a)(a,[{key:"render",value:function(){return Object(p.jsxs)("form",{className:g.a.SearchForm,onSubmit:this.Submit,children:[Object(p.jsx)("button",{type:"submit",className:g.a.SearchForm_button,children:Object(p.jsx)("span",{className:g.a.SearchForm_button_label,children:"Search"})}),Object(p.jsx)("input",{className:g.a.SearchForm_input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:this.state.searchForm,onChange:this.SaveValue})]})}}]),a}(u.Component),_=function(t){Object(l.a)(a,t);var e=Object(i.a)(a);function a(){return Object(c.a)(this,a),e.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){var t=this.props,e=t.status,a=t.saveSubmit,r=t.upLocalStatus;return Object(p.jsxs)("header",{className:d.a.Searchbar,children:[Object(p.jsx)(b,{saveSubmit:a}),Object(p.jsx)("button",{onClick:r,children:e?"\u041d\u0430\u0437\u0430\u0434 \u043a \u043f\u043e\u0438\u0441\u043a\u0443":"\u041c\u043e\u044f \u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0444\u043e\u0442\u043e"})]})}}]),a}(u.Component),f=a(17),S=a.n(f),y=a(13),v=a.n(y);function O(t){var e=t.formRes,a=t.returnUrl;return Object(p.jsxs)(p.Fragment,{children:[!e&&Object(p.jsx)("h1",{children:"\u041f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u043d\u043d\u044b\u0445 \u0444\u043e\u0442\u043e \u0435\u0449\u0451 \u043d\u0435\u0442"}),e&&e.map((function(t,r){return Object(p.jsxs)("li",{className:v.a.ImageGalleryItem,children:[Object(p.jsx)("img",{onClick:function(){a(t)},src:t.webformatURL,alt:"tags",className:v.a.ImageGalleryItem_image}),r===e.length-12&&Object(p.jsx)("div",{id:"scroll"})]},t.id)}))]})}function I(t){var e=t.returnUrl,a=t.arrayImage,r=t.style;return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("ul",{className:S.a.ImageGallery,style:r,children:Object(p.jsx)(O,{formRes:a,returnUrl:e})})})}var x=a(14),F=a.n(x),w=a(12),k=document.querySelector("#modal-root"),N=function(t){Object(l.a)(a,t);var e=Object(i.a)(a);function a(){var t;Object(c.a)(this,a);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))).handleKeyDown=function(e){"Escape"===e.code&&t.props.toggle()},t.handleBackdropClick=function(e){e.currentTarget===e.target&&t.props.toggle()},t}return Object(s.a)(a,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){var t=this.props.url;return Object(r.createPortal)(Object(p.jsx)("div",{className:F.a.Overlay,onClick:this.handleBackdropClick,children:Object(p.jsx)("div",{className:F.a.Modal,children:Object(p.jsx)("img",{src:t,alt:""})})}),k)}}]),a}(w.Component),G=a(18),U=a.n(G);function M(t){var e=t.morePage,a=t.total;return Object(p.jsxs)("button",{className:U.a.Button,onClick:e,children:["\u041d\u0430\u0439\u0434\u0435\u043d\u043e:",a,"foto ",Object(p.jsx)("br",{}),"Load More"]})}var L=a.p+"static/media/wooden-train-2066492_1920.c7803c8b.jpg";function R(){return Object(p.jsx)("div",{children:Object(p.jsx)("img",{width:"100%",src:L,alt:""})})}var E=a(6),C=a.n(E);function A(){return Object(p.jsxs)("div",{className:C.a.loader,children:[Object(p.jsx)("div",{className:"".concat(C.a.inner," ").concat(C.a.one)}),Object(p.jsx)("div",{className:"".concat(C.a.inner," ").concat(C.a.two)}),Object(p.jsx)("div",{className:"".concat(C.a.inner," ").concat(C.a.three)})]})}function H(t){var e=t.error;return Object(p.jsx)("h1",{children:e})}var T=a(9),B=a.n(T);function P(t){var e=t.foto,a=t.returnUrl,r=t.clearHistory;return Object(p.jsxs)("ul",{className:B.a.ImageGallery,children:[e&&Object(p.jsx)("button",{onClick:r,children:"Clear History"}),e&&e.map((function(t){return Object(p.jsx)("li",{className:B.a.ImageGalleryItem,children:Object(p.jsx)("img",{onClick:function(){a(t)},src:t.webformatURL,alt:"tags",className:B.a.ImageGalleryItem_image})},t.id)}))]})}var D=a(15),Y=a.n(D),z=a(19),K={BASE_URL:"https://pixabay.com/api",IMAGE_TYPE:"photo",ORIENTATION:"horizontal",QUANTITY_PER_PAGE:12,KEY:"24908309-0f9f1bd491628a6ee7000b789"};function V(t,e){return W.apply(this,arguments)}function W(){return(W=Object(z.a)(Y.a.mark((function t(e,a){var r,o,n,c;return Y.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="".concat(K.BASE_URL,"/?image_type=").concat(K.IMAGE_TYPE,"&orientation=").concat(K.ORIENTATION,"&q=").concat(e,"&page=").concat(a,"&per_page=").concat(K.QUANTITY_PER_PAGE,"&key=").concat(K.KEY),t.next=3,fetch(r);case 3:return o=t.sent,t.next=6,o.json();case 6:return n=t.sent,c=n.hits.reduce((function(t,e){return t.push({id:e.id,webformatURL:e.webformatURL,largeImageURL:e.largeImageURL}),t}),[]),n.total>12&&c.length>0&&(c[0].loadMore=n.total),t.abrupt("return",c);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var q=function(t){Object(l.a)(a,t);var e=Object(i.a)(a);function a(){var t;Object(c.a)(this,a);for(var r=arguments.length,o=new Array(r),n=0;n<r;n++)o[n]=arguments[n];return(t=e.call.apply(e,[this].concat(o))).state={searchForm:"",showModal:!1,localHostStatus:!1,storeFoto:null,largeUrl:null,page:1,status:"idle",arrayImage:[],error:""},t.saveSearch=function(e){t.setState({searchForm:e,localHostStatus:!1})},t.clearHistory=function(){t.setState({storeFoto:null,largeUrl:null})},t.apiArray=function(t,e){return V(t,e)},t.morePage=function(){t.setState((function(t){return{status:"pending",page:t.page+1}}))},t.startStatus=function(){t.setState({status:"idle"})},t.localStorStatus=function(){t.setState((function(t){return{localHostStatus:!t.localHostStatus}}))},t.takeLarge=function(e){t.setState({largeUrl:e}),t.toggleModal()},t.toggleModal=function(){t.setState((function(t){return{showModal:!t.showModal}}))},t}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var t=this,e=JSON.parse(localStorage.getItem("myFoto"));e&&this.setState({storeFoto:e}),window.onunload=function(){localStorage.setItem("myFoto",JSON.stringify(t.state.storeFoto))}}},{key:"componentDidUpdate",value:function(t,e){var a=this,r=this.state,o=r.largeUrl,c=r.searchForm,s=r.page,l=r.storeFoto,i=r.status;if(o){if(!l)return void this.setState({storeFoto:[o]});if(!l.find((function(t){return o.id===t.id})))return void this.setState((function(t){return{storeFoto:[].concat(Object(n.a)(t.storeFoto),[o])}}))}e.page===s?(e.searchForm!==c&&(this.setState({status:"pending",arrayImage:[]}),this.apiArray(c,1).then((function(t){if(!(t.length>0))return Promise.reject(new Error("\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 ".concat(c," \u043d\u0435\u0431\u044b\u043b\u043e \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439, \u043a\u0440\u0443\u0442\u0438\u0442\u0435 \u0431\u0430\u0440\u0430\u0431\u0430\u043d")));a.setState({arrayImage:t,status:"resolved"})})).catch((function(t){return a.setState({error:t,status:"rejected"})}))),"rejected"===i&&setTimeout((function(){a.setState({status:"idle"})}),2e3)):this.apiArray(c,s).then((function(t){a.setState((function(e){return{arrayImage:[].concat(Object(n.a)(e.arrayImage),Object(n.a)(t)),status:"resolved"}})),document.getElementById("scroll").scrollIntoView({block:"center",behavior:"smooth"})}))}},{key:"render",value:function(){var t,e=this.state,a=e.localHostStatus,r=e.showModal,o=e.largeUrl,n=e.storeFoto,c=e.status,s=e.arrayImage,l=e.error,i=null;return a&&(i={display:"none"}),Object(p.jsxs)("div",{children:[r&&Object(p.jsx)(N,{url:o.largeImageURL,toggle:this.toggleModal}),Object(p.jsx)(_,{saveSubmit:this.saveSearch,upLocalStatus:this.localStorStatus,status:a}),Object(p.jsx)(I,{returnUrl:this.takeLarge,arrayImage:s,storeFoto:n,localHostStatus:a,resetStatus:this.startStatus,style:i}),a&&Object(p.jsx)(P,{foto:n,returnUrl:this.takeLarge,clearHistory:this.clearHistory}),(null===(t=s[0])||void 0===t?void 0:t.loadMore)>12&&!a&&Object(p.jsx)(M,{morePage:this.morePage,total:s[0].loadMore}),"idle"===c&&!a&&Object(p.jsx)(R,{}),"pending"===c&&Object(p.jsx)(A,{}),"rejected"===c&&Object(p.jsx)(H,{error:l.message})]})}}]),a}(u.Component),J=q,Q=(a(25),a(26),document.querySelector("#root"));o.a.render(Object(p.jsx)(m.a.StrictMode,{children:Object(p.jsx)(J,{})}),Q)}],[[27,1,2]]]);
//# sourceMappingURL=main.75b42fb0.chunk.js.map